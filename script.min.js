function EventEmitter(){this.events={}}function App(){this.form=new Form(document.querySelector(".form-musician")),this.list=new List(document.querySelector(".musicians")),this.events=new EventEmitter,this.init()}function List(e){e&&(this.events=new EventEmitter,this.el=e,this.ctrl=!1,this.shif=!1,this.shiftFromTo=[],this.init())}function Form(e){e&&(this.events=new EventEmitter,this.el=e,this.btnAdd=this.el.querySelector(".add-btn"),this.btnDel=this.el.querySelector(".del-btn"),this.btnSelect=this.el.querySelector(".select-btn"),this.input=this.el.querySelector(".input"),this.init())}EventEmitter.prototype.on=function(e,t){"object"!=typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t)},EventEmitter.prototype.emit=function(e){if("object"==typeof this.events[e])for(var t=[].slice.call(arguments,1),i=this.events[e].slice(),n=i.length,l=0;l<n;l++)i[l].apply(this,t)},App.prototype={init:function(){this.form.on("enter-value",this.list.add.bind(this.list)),this.form.on("select-unselect-all",this.list.selectUnselectAll.bind(this.list)),this.form.on("remove-elements",this.list.remove.bind(this.list)),this.list.on("check-for-del",this.form.checkDelBtn.bind(this.form)),this.list.render(data)}},window.addEventListener("DOMContentLoaded",function(){new App});var data=["John Lennon","Gary Moore","Steve Vai","Ronnie James Dio"];List.prototype={init:function(){this.el.addEventListener("click",this.delegationEventClick.bind(this)),document.addEventListener("keyup",this.delegationEventKeyup.bind(this)),document.addEventListener("keydown",this.delegationEventKeydown.bind(this))},on:function(e,t){this.events.on(e,t)},emit:function(e,t){this.events.emit(e,t)},delegationEventClick:function(e){var t=e.target;if("LI"===t.tagName&&this.ctrl)this.selectEl(t),this.shiftFromTo[0]=Array.prototype.indexOf.call(t.parentNode.children,t);else if("LI"===t.tagName&&this.shif){this.shiftFromTo[1]=Array.prototype.indexOf.call(t.parentNode.children,t);var i=this.shiftFromTo[0],n=this.shiftFromTo[1];i<=n?this.selectElsFromTo(i,n):this.selectElsFromTo(n,i)}else"LI"===t.tagName&&(this.selectOneEl(t),this.shiftFromTo[0]=Array.prototype.indexOf.call(t.parentNode.children,t));this.checkForDel(this.getElForDel().length>0)},delegationEventKeydown:function(e){17===e.keyCode?this.ctrl=!0:16===e.keyCode&&(this.shif=!0)},delegationEventKeyup:function(e){17===e.keyCode?this.ctrl=!1:16===e.keyCode&&(this.shif=!1)},add:function(e){this.checkForDel(0!==this.getElForDel().length),this.el.insertAdjacentHTML("beforeend","<li>"+e+"</li>")},render:function(e){for(var t=0;t<e.length;t++)this.add(e[t])},getElForDel:function(){return this.el.querySelectorAll(".for-del")},getAllEl:function(){return this.el.querySelectorAll("li")},selectAll:function(){for(var e=this.getAllEl(),t=0;t<e.length;t++)e[t].classList.add("for-del")},unSelectAll:function(){for(var e=this.getAllEl(),t=0;t<e.length;t++)e[t].classList.remove("for-del")},remove:function(){elements=this.getElForDel();for(var e=0;e<elements.length;e++)elements[e].parentNode.removeChild(elements[e])},selectUnselectAll:function(){this.getAllEl().length!==this.getElForDel().length?this.selectAll():this.unSelectAll(),this.checkForDel(0!==this.getElForDel().length)},selectEl:function(e){var t="string"==typeof e?document.querySelector("#"+e):e;t.classList.toggle("for-del")},selectOneEl:function(e){var t="string"==typeof e?document.querySelector("#"+e):e;this.unSelectAll(),this.selectEl(t)},selectElsFromTo:function(e,t){if(void 0!=e){void 0==t&&(t=e);var i=this.getAllEl();this.unSelectAll();for(var n=e;n<=t;n++)i[n].classList.add("for-del")}},checkForDel:function(e){this.emit("check-for-del",e)}},Form.prototype={init:function(){this.el.addEventListener("click",this.delegationEventClick.bind(this)),this.el.addEventListener("keyup",this.delegationEventKeyup.bind(this))},on:function(e,t){this.events.on(e,t)},emit:function(e,t){this.events.emit(e,t)},clearInputValue:function(){this.input.value=""},delegationEventClick:function(e){var t=e.target;if(t===this.btnAdd&&(this.enterVal(this.input.value),this.clearInputValue()),t===this.btnSelect&&this.selectUnselectAll(),t===this.btnDel){if(!confirm("Selected elements will be deleted. Are you sure?"))return;this.remove()}this.checkAddBtn()},delegationEventKeyup:function(e){13===e.keyCode&&""!==this.input.value&&(this.enterVal(this.input.value),this.clearInputValue()),this.checkAddBtn()},enterVal:function(e){this.emit("enter-value",e)},selectUnselectAll:function(){this.emit("select-unselect-all")},remove:function(){this.emit("remove-elements")},checkDelBtn:function(e){e?this.btnDel.removeAttribute("disabled"):this.btnDel.setAttribute("disabled","disabled")},checkAddBtn:function(){""===this.input.value?this.btnAdd.setAttribute("disabled","disabled"):this.btnAdd.removeAttribute("disabled")}};